
<div class="container  d-flex align-items-center justify-content-center">
    <div class="signup-form mt-5" *ngIf="!challenged">

        <form [formGroup]="loginForm" (ngSubmit)="login()">
            <h2>Login</h2>
        
            <hr>
            <div class="login-failed mt-2" *ngIf='this.isError'>
                <p class="login-failed-text">Please check your credentials and try again.</p>   
           </div>
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">
                            <span class="fa fa-user"></span>
                        </span>                    
                    </div>
                    <input type="text"  [formControlName]="'username'" class="form-control" name="username" placeholder="Username" required="required" autofocus>
                </div>
                <span *ngIf="!loginForm.get('username').valid && loginForm.get('username').touched" class="ml-5">
                    Please prove a valid username
                </span>
            </div>
         
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">
                            <i class="fa fa-lock"></i>
                        </span>                    
                    </div>
                    <input type="password" [formControlName]="'password'"class="form-control" name="password" placeholder="Password" required="required">
                </div>
                <span *ngIf="!loginForm.get('password').valid && loginForm.get('password').touched" class="ml-5">
                    Password must be at least 4 characters
                </span>
            </div>
            

            <div class="d-grid gap-2  mx-auto mt-2">
                <button class="btn btn-primary btn-block" type="submit">LOGIN</button>
            </div> 

           <div class="login-failed mt-2"  *ngIf="this.registrationSuccessMessage.length > 0">
               <p class="register-success text-center">{{registrationSuccessMessage}}</p>   
          </div>                       
        </form>
    </div>

    <div class="signup-form mt-5" *ngIf="challenged">
        <form [formGroup]="tokenForm" (ngSubmit)="sendCode()">
            <h2>Enter Verification Code</h2>
        
            <hr>
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">
                            <i class="fa fa-lock"></i>
                        </span>                    
                    </div>
                    <ng-otp-input  (onInputChange)="onOtpChange($event)"  [config]="{length:6}"></ng-otp-input>

                </div>
               
            </div>
            
           
            <div class="d-grid gap-2  mx-auto mt-2">
                <button class="btn btn-primary btn-block" type="submit">Submit</button>
            </div> 

           <div class="login-failed mt-2"  *ngIf="this.registrationSuccessMessage.length > 0">
               <p class="register-success text-center">{{registrationSuccessMessage}}</p>   
          </div>                       
        </form>
    </div>
    
</div>


